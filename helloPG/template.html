<!DOCTYPE html>
<html>
	<title>&nbsp;</title>
	<head>
		
		<style>
		
		#compassneedle{
			position:absolute;
			top:0px;
			left:0px;
			z-index: 1;
		}
		
		</style>
	
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
		<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
		<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
		<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
		<script src="jqRotate/jqRotate.js"></script>
	</head>
	<body>
	<img src="imagen/compassneedle.png" id="compassneedle"/>
</html>
<script>

// The watch id references the current `watchHeading`
			var watchID = null;

			// Wait for device API libraries to load
			//
			document.addEventListener("deviceready", onDeviceReady, false);

			// device APIs are available
			//
			function onDeviceReady() {
				startWatch();
			}

			// Start watching the compass
			//
			function startWatch() {

				// Update compass 60 times / second form smooth animation
				var options = {
					frequency : 16
				};

				watchID = navigator.compass.watchHeading(onSuccess, onError, options);
			}

			// Stop watching the compass
			//
			function stopWatch() {
				if (watchID) {
					navigator.compass.clearWatch(watchID);
					watchID = null;
				}
			}

			// onSuccess: Get the current heading
			//
			function onSuccess(heading) {
				//var element = document.getElementById('heading');
				//element.innerHTML = 'Heading: ' + heading.magneticHeading;
				var needle = document.getElementById("compassneedle");
				var transform = "rotate(-" + heading.magneticHeading + "deg)";
				needle.style.webkitTransform = transform;
			}

			// onError: Failed to get the heading
			//
			function onError(compassError) {
				alert('Compass error: ' + compassError.code);
			}
</script>